/* stylelint-disable */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .top-shelf {
    -webkit-font-smoothing: antialiased;
    backface-visibility: hidden;
    transform: translateZ(0); /* helps Safari reduce flicker */
  }

  /* Safe area insets for iOS notch/status bar */
  /* Use fixed base padding to prevent jumps on initial PWA launch */
  .pt-safe-top {
    /* Base padding for all devices - prevents low header on initial PWA launch */
    padding-top: 44px;
    /* Override with env() value if available (falls back to 44px if env() not supported) */
    padding-top: max(44px, env(safe-area-inset-top));
  }
  
  .pb-safe-bottom {
    /* Base padding with env() override */
    padding-bottom: 24px;
    padding-bottom: max(24px, env(safe-area-inset-bottom));
  }
  
  /* For PWA standalone mode, use fixed padding to prevent iOS recalculation jumps */
  @media all and (display-mode: standalone) {
    .pt-safe-top {
      /* In standalone mode, use fixed 47px (most common iPhone safe area) */
      /* This prevents the iOS recalculation jump on first scroll */
      /* iOS recalculates env() on first scroll in standalone, causing jumps */
      padding-top: 47px;
    }
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .motion-safe\:transition-none {
    transition: none !important;
  }
  
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here.
All colors MUST be HSL.
*/

@layer base {
  :root {
    --radius: 0.5rem;
    --background: 0 0% 100%;
    --foreground: 0 0% 9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;
    --accent: 210 100% 50%;
    --accent-foreground: 0 0% 98%;
    --success: 142 76% 36%;
    --success-foreground: 0 0% 98%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 90%;
    --input: 0 0% 90%;
    --ring: 0 0% 9%;
    --chart-1: 210 100% 50%;
    --chart-2: 142 76% 36%;
    --chart-3: 45 93% 47%;
    --chart-4: 280 67% 55%;
    --chart-5: 0 84% 60%;
  }

  .dark {
    --background: 0 0% 9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 12%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 18%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 18%;
    --muted-foreground: 0 0% 63%;
    --accent: 210 100% 50%;
    --accent-foreground: 0 0% 98%;
    --success: 142 76% 36%;
    --success-foreground: 0 0% 98%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 18%;
    --input: 0 0% 18%;
    --ring: 0 0% 63%;
    --chart-1: 210 100% 50%;
    --chart-2: 142 76% 36%;
    --chart-3: 45 93% 47%;
    --chart-4: 280 67% 55%;
    --chart-5: 0 84% 60%;
  }

  /* Benjamin Customer Theme (Light) */
  .app-customer {
    --bg-page: 245 245 247;
    --bg-card: 255 255 255;
    --border-subtle: 0 0 0 / 0.05;
    --text-main: 0 0 0;
    --text-muted: 107 114 128;
    --accent: 0 0 0;
    --danger: 239 68 68;
    --success: 22 163 74;
    --warning: 249 115 22;
  }

  /* Benjamin Runner Theme (Dark Navy) */
  .app-runner {
    --bg-page-runner: 2 8 23;
    --bg-card-runner: 11 16 32;
    --border-subtle-runner: 148 163 253 / 0.14;
    --text-main-runner: 249 250 251;
    --text-muted-runner: 156 163 175;
    --accent-runner: 99 102 241;
    --danger-runner: 249 115 115;
    --success-runner: 34 197 94;
    --warning-runner: 251 191 36;
  }

  /* Runner Bottom Nav Color System */
  :root {
    --bg-root: #020817;
    --bg-card: #050816;
    --bg-nav: #040814;
    --bg-tab-selected: #021432;
    --accent: #40F58C;
    --text-primary: #F9FAFB;
    --text-muted: #6B7280;
    --icon-muted: #6B7280;
    --shadow-nav: 0 12px 40px rgba(0, 0, 0, 0.75);
  }

  /* Benjamin Admin Theme (Graphite Neutral) */
  .app-admin {
    --bg-page-admin: 27 29 33; /* #1B1D21 */
    --bg-card-admin: 35 38 43; /* #23262B */
    --bg-hover-admin: 45 48 54; /* #2D3036 */
    --border-admin: 47 50 56; /* #2F3238 */
    --text-primary-admin: 241 243 245; /* #F1F3F5 */
    --text-secondary-admin: 167 169 172; /* #A7A9AC */
    --text-tertiary-admin: 108 110 115; /* #6C6E73 */
    --accent-admin: 88 101 242; /* #5865F2 */
    --accent-hover-admin: 71 82 196; /* #4752C4 */
    --success-admin: 60 213 160; /* #3CD5A0 */
    --warning-admin: 251 191 36; /* #FBBF24 */
    --danger-admin: 239 68 68; /* #EF4444 */
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }

  /* Ensure html, body, and root are full height with no margin/padding */
  html,
  body,
  #root {
    height: 100%;
  }

  /* Kill any stray margin/padding on root */
  #root {
    margin: 0;
    padding: 0;
  }

  body {
    @apply bg-background text-foreground;
  }

  /* Mobile App Viewport Constraints */
  /* Runner and Customer apps are mobile-only - edge-to-edge rendering */
  body.mobile-app-viewport {
    /* Edge-to-edge rendering - no phone frame */
    max-width: 100vw;
    overflow-x: hidden;
    overscroll-behavior-x: none;
    /* Disable text selection highlight on tap */
    -webkit-tap-highlight-color: transparent;
  }

  /* Root container - edge-to-edge */
  body.mobile-app-viewport #root {
    width: 100%;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
    overscroll-behavior-x: none;
  }

  /* Ensure all content respects the container */
  body.mobile-app-viewport #root > * {
    width: 100%;
    position: relative;
    overflow-x: hidden;
  }

  /* Make sure layouts fill the container properly */
  body.mobile-app-viewport [class*="CustomerLayout"],
  body.mobile-app-viewport [class*="RunnerLayout"] {
    width: 100%;
    min-height: 100vh;
    position: relative;
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0; /* Important for flex scrolling */
  }
  
  /* Admin layouts should be responsive */
  body.mobile-app-viewport [class*="AdminLayout"] {
    width: 100%;
    height: auto;
    min-height: 100vh;
    position: relative;
    display: flex;
    flex-direction: column;
  }

  /* Responsive Viewport (Admin) */
  /* Admin can be accessed on desktop/mobile, web + app */
  body.responsive-viewport {
    /* No constraints - fully responsive */
  }

  /* App-specific viewport classes */
  body.customer-app-viewport {
    /* Customer app styling - can add specific overrides if needed */
  }

  body.runner-app-viewport {
    /* Runner app styling - can add specific overrides if needed */
  }

  /* Make sure the "mobile-app-viewport / runner-app-viewport"
     combo never injects a light gap behind the runner app */
  body.mobile-app-viewport.runner-app-viewport {
    margin: 0;
    padding: 0;
    background-color: #020817; /* same as runner bg */
  }

  /* Ensure #root has no margin/padding when in runner viewport */
  body.mobile-app-viewport.runner-app-viewport #root {
    margin: 0;
    padding: 0;
    height: 100%;
  }

  body.admin-app-viewport {
    /* Admin app styling - can add specific overrides if needed */
  }

  /* Hide spin buttons for number inputs (clean numeric input) */
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type="number"] {
    -moz-appearance: textfield;
  }
}

/* Benjamin Pulse Animation for New Delivery Cards */
@keyframes benjamin-pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(64, 245, 140, 0.18);
    background-color: rgba(64, 245, 140, 0.08);
  }
  50% {
    box-shadow: 0 0 24px 6px rgba(64, 245, 140, 0.14);
    background-color: rgba(64, 245, 140, 0.12);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(64, 245, 140, 0);
    background-color: rgba(64, 245, 140, 0.08);
  }
}

.benjamin-pulse {
  animation: benjamin-pulse 1.4s ease-in-out infinite;
}

/* Runner tab slide animations */
@keyframes slideInLeft {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Slide hint animation for chevrons */
@keyframes slide-hint {
  0% {
    transform: translateX(0);
    opacity: 0.55;
  }
  40% {
    transform: translateX(5px);
    opacity: 1;
  }
  100% {
    transform: translateX(0);
    opacity: 0.55;
  }
}

.slide-hint-chevron {
  animation: slide-hint 1.2s ease-in-out infinite;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .slide-hint-chevron {
    animation: none;
  }
}


